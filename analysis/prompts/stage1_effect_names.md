あなたは「エイリアンのたまご」のゲーム仕様に精通した、高精度なデータ抽出エキスパートです。
あなたのタスクは、入力された**1つの個性（スキル）説明文**を解析し、そこに含まれる「すべてのバフ・デバフ・状態異常関連効果」と、その効果を発動するための「味方の編成条件」を抽出し、**JSON配列形式**で出力することです。

## 個性文のフォーマットについて

個性文には2つのフォーマットがあります：

### 旧フォーマット
通常の文章形式（例: "味方に動物属性がいるとつよさアップ"）

### 新フォーマット
`【カテゴリ】効果1、効果2、効果3【カテゴリ】効果...` の形式

**新フォーマットの解析ルール**:
1. `【抵抗力】` の後に続く項目は、それぞれ独立した**抵抗効果**です
   - 例: `【抵抗力】気絶、呪縛、足止め` → 「気絶抵抗」「呪縛抵抗」「足止め抵抗」の3つ
   - 例: `【抵抗力】気絶、いどう、やるき` → 「気絶抵抗」「いどうダウン抵抗」「やるきダウン抵抗」の3つ
   - **重要**: 効果名一覧から対応する抵抗名を選択してください。
       * 気絶 → 気絶抵抗
       * 呪縛 → 呪縛抵抗
       * 足止め → 足止め抵抗
       * いどう → いどうダウン抵抗
       * やるき → やるきダウン抵抗
       * 回避率 → 回避率ダウン抵抗（効果名一覧にある場合のみ）
       * たいりょく回復量ダウン、回復量ダウン → 回復量ダウン抵抗
       * 効果名一覧に該当する抵抗効果名が存在しない項目は無視してください。
2. `【被ダメージ軽減】` の後の記述は、その直後の修飾語で効果が決まります
   - `【被ダメージ軽減】全35%` → 「被ダメージ軽減」（後に続く解析で対象を決定）
   - `【被ダメージ軽減】通常35%` → 「通常攻撃被ダメージ軽減」（後に続く解析で対象を決定）
   - `【被ダメージ軽減】特技35%` → 「特技被ダメージ軽減」（後に続く解析で対象を決定）
   - `【被ダメージ軽減】特技35%WA...` のように%の直後に他の文字列が続く場合も、%までを1つの効果として区切ってください

**新フォーマット解析の例**:
例1:
```
【抵抗力】気絶、呪縛、いどう【被ダメージ軽減】全35%
```
→ 以下の4つの効果:
1. 気絶抵抗
2. 呪縛抵抗
3. いどうダウン抵抗
4. 被ダメージ軽減

例2:
```
【抵抗力】気絶、回避率、いどう【被ダメージ軽減】全35%WAVE開始から20秒間、いどうを200アップ！
```
→ 以下の5つの効果:
1. 気絶抵抗
2. 回避率ダウン抵抗（回避率 → 回避率ダウン抵抗）
3. いどうダウン抵抗（いどう → いどうダウン抵抗）
4. 被ダメージ軽減
5. いどうアップ（WAVE開始から20秒間は無視）

## 抽出ルール

**最重要: 発動タイミング・条件は絶対に無視し、すべての効果を抽出してください。**

「WAVE開始から〇秒間」「倒されるまで」「たいりょくがなくなると」「自分が倒されるまで」「10回攻撃する毎に」「攻撃する毎に」「攻撃を受ける度〇回まで」「8回攻撃すると」「1度だけ」「2回まで」「〇〇した時に」などの発動タイミングや発動条件は**完全に無視**し、**すべての効果を必ず抽出してください**。これらは単なる発動条件であり、効果自体ではありません。

1.  **効果の網羅**: 個性文に含まれるバフ・デバフ・状態異常関連効果を**すべて**特定し、**効果1つにつき1オブジェクト** のJSONを生成してください。
    * **重要0: バフ・デバフの区別**: 
        * **バフ**: 味方に有利な効果（アップ、軽減、抵抗、回復など）
        * **デバフ**: 敵に不利な効果（ダウン、無効、状態異常付与など）
        * **自分へのデメリット（自己デバフ）**: 自分に不利な効果は除外
        * 例: 「敵全員の特技をびっくりするほど出にくくする」→「特技頻度ダウン」（敵へのデバフ）を抽出
        * 例: 「味方全員の特技頻度ダウンへの抵抗力をつける」→「特技頻度ダウン抵抗」（味方へのバフ）を抽出
    * **重要1: 自分にデメリットになる効果は無視**: 「〇〇のかわりに××が減少」「〇〇が減少するかわりに××」「〇〇効果を◯％ずつダウンするが」のように、**自分にデメリット（減少・短縮・ダウン）として記述されている効果は無視**してください。メリット（増加・延長・アップ）の効果のみを抽出してください。
        * 例1: 「毒効果時間が70%減少するかわりに毒ダメージが300%アップ」→「毒ダメージアップ」のみ抽出（毒効果時間短縮は無視）
        * 例2: 「通常攻撃した時、敵をかなり毒状態にしやすいぞ！自分が敵を毒にした場合、毒効果時間が80%ダウンするが、敵がエイリアンだった場合、毒ダメージが317%アップ！」→「毒アタック」と「毒ダメージアップ」のみ抽出（毒効果時間ダウンは自分へのデメリットなので無視）
        * 例3: 「攻撃した敵をかなり毒状態にしやすいぞ！毒効果時間は70％短縮されるが、敵がエイリアンの場合は、毒ダメージを200％アップ！」→「毒アタック」と「毒ダメージアップ」のみ抽出（毒効果時間短縮は自分へのデメリットなので無視）
        * 例4: 「被ダメージを80％軽減！さらに味方が力尽きる毎に、被ダメージ軽減効果を30％ずつダウンするが、与ダメージを70％ずつアップし、たいりょくを50％回復するぞ！」→「被ダメージ軽減」「与ダメージアップ」「たいりょく回復」の3つを抽出（被ダメージ軽減ダウンは自分へのデメリットなので無視）
    * **重要2: キラー系**: 
        * **キラー効果名は「毒キラー」と「気絶キラー」のみ**です。
        * 毒状態や気絶状態の敵に対して与ダメージアップの効果は「毒キラー」「気絶キラー」に分類してください。
        * 他の状態（クリティカル、呪縛など）に対する与ダメージアップは「キラー」ではなく、通常の「〇〇アップ」「〇〇ダメージアップ」として分類してください。
        * 例: 「クリティカルだった時、ダメージが82%アップ」→「クリティカルダメージアップ」（「クリティカルキラー」ではない）
    * **重要3: 複数効果の分離**: 1つの個性文に複数の効果が含まれる場合は、すべて分離して抽出してください。
        * 例: 「10回攻撃すると15秒間、敵全員のいどうを100ダウンし、小人化する」→「いどうダウン」「小人化」の2つを抽出（「10回攻撃する」「15秒間」は無視）
        * 例: 「たいりょくがなくなると、80%の確率で近くの敵にダメージを与えたり、敵全体の被ダメージを一定時間アップさせる」→「自爆」と「被ダメージアップ」の2つを抽出（「たいりょくがなくなると」「80%の確率」は無視）
        * 例: 「自分が倒されるまで、味方全員に色んなデバフへの抵抗力をつける」→「毒抵抗」「やるきダウン抵抗」「いどうダウン抵抗」など複数の抵抗を抽出（「自分が倒されるまで」は無視）
        * 例: 「攻撃を受ける度6回まで、味方全員のたいりょくを12%回復するぞ！」→「たいりょく回復」を抽出（「攻撃を受ける度6回まで」は無視）
    * **重要4: ひきよせと属性狙いの区別**: 「〇〇属性をほいほいする」「〇〇属性の敵が自分を狙う」は「ひきよせ」です。「属性狙い」ではありません。
        * 例: 「敵全員を自分にひきつける」→ `name: "ひきよせ"`, `target: "自分"`, `condition_target: "敵全員"`
    * **重要5: 連撃と攻撃回数アップの区別**: 「連撃する」は「連撃」、「攻撃回数が○回増える」「攻撃回数が○回ふえる」は「攻撃回数アップ」
        * 例: 「60%の確率で、れんぞく攻撃の回数が1回ふえる」→「攻撃回数アップ」（「連撃」ではない）
2.  **抽出対象カラム**: 各効果について、以下のキーを抽出してください。
    * `name`: 効果名。**必ず下記の「効果名の一覧」から選択**してください。
    * `has_requirement`: 「味方の編成条件」の有無 (true/false)。
    * `requirement_details`: 要求の内容（`category:value` の形式）。
    * `requirement_count`: 要求数（指定がなければ `1`）。
    * `target`: バフ・デバフが付与される対象（効果を受ける対象）。例: 「〇〇属性の味方の与ダメージをアップする」の「〇〇属性の味方」
    * `condition_target`: 効果の対象（バフ分類用）。例: 「〇〇属性に対する与ダメージをアップ」「〇〇属性からの被ダメージを軽減」の「〇〇属性」
3.  **完全に無視する項目**: 以下の項目は**この段階では一切考えない**でください。
    * `requires_awakening`: 個性覚醒の要否
    * 効果量、持続時間、発動確率
    * 発動タイミング
    * バフ枠の使用有無
4.  **出力形式**: 必ず**JSON配列形式**で出力してください。該当する効果がない場合は、空の配列 `[]` を返してください。

## 効果名の一覧

**必ずこのリストから効果名を選択してください。新しい効果名を作らないでください。**

{effect_names_list}

## 要求 (requirement) のルール

1.  **抽出対象**: **味方チームの編成**（属性、所属、タイプ、範囲、距離が何体いるか）を**前提条件**とするもの**のみ**を `has_requirement: true` としてください。
    * キーワード: 「味方に〇〇が△体以上いると」「仲間に〇〇がいると」

2.  **絶対に無視する条件（has_requirement = false）**:
    * **「敵」に依存する条件**: 「敵に昆虫属性がいると」「敵がエイリアンだった場合」など
    * **「自分」の状態に依存する条件**: 
        * 体力条件: 「たいりょくが50%以上」「たいりょくが0になったとき」
        * 回数条件: 「10回ダメージを与えると」「攻撃する毎に」
        * 時間条件: 「倒されるまで」「全員いなくなるまで」「99秒間」
        * その他: 「WAVE開始時」「攻撃した時」「受けた時」など
    * これらは**編成条件ではない**ため、必ず `has_requirement: false` としてください。

3.  **効果対象との区別（重要）**:
    * **効果対象**（誰が効果を受けるか）を編成条件と混同しないでください。
    * **target（バフ・デバフが付与される対象）**: 効果が付与される対象を指定します。
        * 「昆虫属性の味方のクリティカル率アップ」→ `target: "a:2"`, `has_requirement: false`
        * 「味方全員のたいりょくを80%回復」→ `target: "味方全員"`, `has_requirement: false`
        * 「敵全員のいどうを100ダウン」→ `target: "敵全員"`, `has_requirement: false`
        * 「呪縛への抵抗力をつける」→ `target: "自分"`, `has_requirement: false`（対象指定がない場合は自分）
    * **condition_target（効果の対象）**: 
        * 「昆虫/ナゾ属性に与えるダメージを120%アップ」→ `condition_target: "a:2,a:4"`, `has_requirement: false`
        * 「距離：ふつうの敵からの被ダメージを軽減」→ `condition_target: "d:2"`, `has_requirement: false`
    * **編成条件とtargetの区別**:
        * 「味方に昆虫属性が3体以上いると、攻撃力アップ」→ **「3体以上いる」という編成条件がある**ため `has_requirement: true`, `target: ""`
        * 「自分以外の味方にラブタイプがいると、つよさを120%アップ」→ **編成条件がある**ため `has_requirement: true`（タイプ: ラブ）, `target: ""`（効果を受けるのは自分）
        * **編成条件がある場合、効果を受ける対象は文脈から判断してください**:
            * 「味方に〇〇がいると、△△をアップ」→ 一般的には自分に効果が付与される → `target: ""` または `target: "自分"`
        * **ただし、明確に効果対象が指定されている場合はtargetを設定**:
            * 「味方に動物属性が3体以上いると、味方全員のつよさをアップ」→ `has_requirement: true`, `target: "味方全員"`
    * **例外（編成条件継承）**: 「味方に〇〇が△体以上いると、A効果とB効果」のように、**同じ編成条件で複数の効果が発動する場合**は、後続の効果も同じ編成条件を引き継ぎます。
        * **ただし**: 以下のような**効果対象の指定**は編成条件ではありません:
            * 「昆虫/ナゾ属性に与えるダメージを120%アップ」→ `condition_target: "a:2,a:4"`, `has_requirement: false`
            * 「昆虫属性の味方のクリティカル率アップ」→ `target: "a:2"`, `has_requirement: false`
        * 正しい例: 「味方に動物属性が3体以上いると、つよさを100％アップし、与ダメージを50%アップ」→ 両方とも `has_requirement: true`, `target: ""`
        * 正しい例: 「味方に宇宙連合がいると、たいりょくを120%アップし、昆虫属性に与えるダメージを120%アップ」→ たいりょくアップ: `has_requirement: true`, `target: ""` / 与ダメージアップ: `has_requirement: false`, `condition_target: "a:2"`
        * 正しい例: 「味方に恒星連邦が2体以上いると、味方全員の与ダメージが20%アップし、攻撃すると気絶させやすく」→ 与ダメージアップ: `has_requirement: true`, `target: "味方全員"` / 気絶アタック: `has_requirement: true`, `target: "味方全員"`
        * 正しい例: 「味方に銀河同盟がいると、自分のたいりょくとつよさを130%アップし、昆虫/機械/ナゾ属性に与えるダメージを200%アップ」→ たいりょくアップ: `has_requirement: true`, `target: "自分"` / つよさアップ: `has_requirement: true`, `target: "自分"` / 与ダメージアップ: `has_requirement: true`, `target: "自分"`, `condition_target: "a:2,a:3,a:4"`
        * 間違い: 「自分が10回攻撃すると味方全員の与ダメージがアップ」→ `has_requirement: false`（「10回攻撃」は状態依存条件）
        * 間違い: 「敵エイリアンが残り2体以下になると」→ `has_requirement: false`（敵の状態依存条件は編成条件ではない）
4.  `requirement_details` 
    * `category:value` の形式で結合してください。
    * **「〇〇以外」の場合**: 値の末尾に `!` を付けてください（例: "d:3!" = とおい以外、"a:2!" = 昆虫属性以外）。
    * **Category**: 属性:`a`, 所属:`b`, 攻撃はんい:`c`, 攻撃距離:`d`, タイプ:`e`
    * **Value**: 
        * 属性: 動物:1, 昆虫:2, 機械:3, ナゾ:4
        * 所属: 宇宙連合:1, 星間帝国:2, 恒星連邦:3, unknown:4, 銀河同盟:5
        * 攻撃はんい: たんたい:1, はんい:2
        * 攻撃距離: ちかい:1, ふつう:2, とおい:3
        * タイプ: 海:A, 夜:B, 氷:C, ラブ:D, 空:E, 音:F, 魔術:G, 熱:H, 大和:I, エレメント:J, 新星:K, チケット:L, 突然変異:M, 競技:N, 盗賊:O, 祈祷:P, 闇:Q, パックマンシリーズまたはカタログIP:AA
    * **例**: 
        * 「味方に動物属性が3体以上いると」→ `requirement_details: "a:1"`, `requirement_count: 3`
        * 「味方にとおい以外がいると」→ `requirement_details: "d:3!"`, `requirement_count: 1`
        * 「味方に海タイプが2体以上いると」→ `requirement_details: "e:A"`, `requirement_count: 2`
5.  `requirement_count`:
    * 「〇体以上」などの指定があればその数値を、指定がなければ `1`。

6.  `target`（バフ・デバフが付与される対象）:
    * バフ・デバフを受ける対象を指定します。
    * **バフの場合**:
        * 「自分」→ `target: "自分"`
        * 「味方全員」→ `target: "味方全員"`
        * 「〇〇属性の味方」→ `target: "a:1"`（要求と同じ属性マッピング）
        * 「はんいの味方」→ `target: "c:2"`（要求と同じ攻撃はんいマッピング: たんたい:1, はんい:2）
        * 「距離：ふつうの味方」→ `target: "d:2"`（要求と同じ攻撃距離マッピング: ちかい:1, ふつう:2, とおい:3）
    * **デバフの場合**: **デバフはcondition_targetを使わず、targetのみで指定します。requirement_detailsは使用しません**
        * 「攻撃した敵」「攻撃する毎に（敵を）」「攻撃した時に（敵を）」→ `target: "敵単体"`, `has_requirement: false`（攻撃した相手のみに効果が付与される）
        * 「敵全員」→ `target: "敵全員"`, `has_requirement: false`
        * **「敵全体」**も`target: "敵全員"`として扱います
        * 「〇〇属性の敵」→ `target: "a:1"`, `has_requirement: false`（要求と同じ属性マッピング）
        * 「〇〇/△△属性の敵」→ `target: "a:1,a:4"`, `has_requirement: false`（複数属性の場合はカンマ区切り）
        * 例: 「昆虫/ナゾ属性の敵の特技を出にくくする」→ `name: "特技頻度ダウン"`, `target: "a:2,a:4"`, `has_requirement: false`, `requirement_details: ""`, `condition_target: ""`
        * 「はんいの敵」→ `target: "c:2"`, `has_requirement: false`
        * 「距離：ふつうの敵」→ `target: "d:2"`, `has_requirement: false`
        * **注意**: 「敵エイリアン」や「敵エイリアン全員」という表記は`target: "敵全員"`として扱います（エイリアン限定の指定である場合も全体として扱う）
        * **自爆系の効果**: 「自爆して敵にダメージを与える」などの自爆系の効果は`target: "敵全員"`として扱います
    * 複数指定がある場合はカンマ区切りで結合（例: "a:1,a:4" = 動物/ナゾ属性の味方）
    * 該当しない場合は空文字列 `""` または `null`

7.  `condition_target`（効果の対象）:
    * 効果が作用する対象を指定します。**バフの場合のみ使用**します。
    * **condition_targetは「〇〇に対する」「〇〇からの」のような特定の属性・はんい・きょり・ボスタイプに対する効果の場合のみ使用**します。
    * 例: 「昆虫属性に対する与ダメージを120%アップ」→ `condition_target: "a:2"`, `target: "自分"`
    * 例: 「動物属性に与えるダメージを100％アップ」→ `condition_target: "a:1"`, `target: "自分"`
    * 例: 「距離：ふつうの敵からの被ダメージを軽減」→ `condition_target: "d:2"`, `target: "自分"`
    * 例: 「レジェンドボスに与えるダメージを200%アップ」→ `condition_target: "boss:1"`, `target: "自分"`
    * 例: 「動物/昆虫属性の敵の特技を出にくく」→ これはデバフなので `target: "a:1,a:2"`, `condition_target: ""`（デバフはcondition_target不要）
    * **重要**: 「味方全員の敵に与えるダメージを50％アップ」のような場合は、効果を受けるのは味方全員なので `target: "味方全員"`、`condition_target: ""`（条件付きではない）
    * `category:value` の形式で結合してください（属性、はんい、きょり、ボスタイプ）。
    * **Category**: 属性:`a`, 攻撃はんい:`c`, 攻撃距離:`d`, ボスタイプ:`boss`
    * **Value**: 
        * 属性: 動物:1, 昆虫:2, 機械:3, ナゾ:4
        * 攻撃はんい: たんたい:1, はんい:2
        * 攻撃距離: ちかい:1, ふつう:2, とおい:3
        * ボスタイプ: レジェンド:1
    * 複数指定がある場合はカンマ区切りで結合（例: "a:1,a:4" = 動物/ナゾ属性）
    * 該当しない場合は空文字列 `""` または `null`

## 解析対象

以下の個性テキストを解析し、JSON配列形式で出力してください:

```
{skill_text}
```

**出力形式:**
```json
[
  {
    "name": "（効果名一覧から選択）",
    "has_requirement": true,
    "requirement_details": "a:1",
    "requirement_count": 3,
    "target": "味方全員",
    "condition_target": ""
  }
]
```

**重要**: 
- `has_requirement` は必ず boolean 型（`true` または `false`）で出力してください。
- `requirement_details` は `has_requirement: true` の場合のみ値を持ち、`false` の場合は空文字列 `""` または `null` にしてください。
- `requirement_count` は必ず数値で出力してください（指定がない場合は `1`）。
- `target`: バフ・デバフが付与される対象（効果を受ける対象）。具体例は上記ルール6を参照
- `condition_target`: 効果の対象（バフ分類用）。具体例は上記ルール7を参照
- `requirement_details` は `category:value` 形式で、要求と同じマッピングを使用

該当する効果が一切ない場合は、空の配列 `[]` を返してください。

